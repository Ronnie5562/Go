<workflow-definition
    xmlns="urn:liferay.com:liferay-workflow_6.1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:liferay.com:liferay-workflow_6.1.0 
    http://www.liferay.com/dtd/liferay-workflow-definition_6_1_0.xsd"
>
<name>Visa Application Process</name>
<description>A single approver can approve a workflow content.</description>
<version>1</version>

<state>
    <name>created</name>
    <initial>true</initial>
    <transitions>
        <transition>
            <name>review</name>
            <target>review</target>
            <default>true</default>
        </transition>
    </transitions>
</state>

<task>
    <name>update</name>
    <actions>
        <notification>
            <name>Creator Modification Notification</name>
            <execution-type>onAssignment</execution-type>
            <template>Your submission was rejected by a reviewer, please modify and resubmit.</template>
            <template-language>text</template-language>
            <notification-type>email</notification-type>
        </notification>
    </actions>
    <assignments>
        <user />
    </assignments>
    <transitions>
        <transition>
            <name>resubmit</name>
            <target>review</target>
            <default>true</default>
        </transition>
    </transitions>
</task>

<task>
    <name>review</name>
    <actions>
        <notification>
            <name>Review Notification</name>
            <execution-type>onAssignment</execution-type>
            <template>You have a new submission waiting for your review in the workflow.</template>
            <template-language>text</template-language>
            <notification-type>email</notification-type>
        </notification>
    </actions>
<task/>

<assignments>
    <roles>
	<role>
        <role-type>community</role-type>
        <name>Community Administrator</name>
	</role>
	<role>
        <role-type>community</role-type>
        <name>Community Content Reviewer</name>
	</role>
	<role>
        <role-type>community</role-type>
        <name>Community Owner</name>
	</role>
	<role>
        <role-type>organization</role-type>
        <name>Organization Administrator</name>
	</role>
	<role>
          <role-type>organization</role-type>
          <name>Organization Content Reviewer</name>
	</role>
	<role>
        <role-type>organization</role-type>
        <name>Organization Owner</name>
	</role>
	<role>
        <role-type>regular</role-type>
        <name>Portal Content Reviewer</name>
	</role>
	<role>
        <role-type>regular</role-type>
        <name>Administrator</name>
	</role>
    </roles>
</assignments>














<task>
    <name>application-approval-payment</name>
    <actor>Embassy Staff, Applicant</actor>
    <actions>

        <action>
            <name>approves-visa-application</name>
            <execution-type>onAssignment</execution-type>
            <script>
                function approvesVisaApplication() {}
            </script>
            <script-language>javascript</script-language>
            <!-- Approves the application for visa issuance. -->
        </action>

        <action>
            <name>generates-approval-notification</name>
            <execution-type>onAssignment</execution-type>
            <script>
                function generatesApprovalNotification() {}
            </script>
            <script-language>javascript</script-language>
            <!-- Generates an automated approval notification to the applicant. -->
        </action>

        <action>
            <name>captures-visa-fee-payment-confirmation</name>
            <execution-type>onAssignment</execution-type>
            <script>
                function capturesVisaFeePaymentConfirmation() {}
            </script>
            <script-language>javascript</script-language>
            <!-- Captures visa fee payment confirmation. -->
        </action>

    </actions>

    <assignments>
        <Immigration-Department />
        <Applicant />
    </assignments>

    <transitions>
        <transition>
            <name>complete-application-approval</name>
            <target>document-issuance</target>
            <default>true</default>
        </transition>
    </transitions>
<task/>
