<?xml version="1.0"?>
<workflow-definition
    xmlns="urn:liferay.com:liferay-workflow_6.1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:liferay.com:liferay-workflow_6.1.0 
    http://www.liferay.com/dtd/liferay-workflow-definition_6_1_0.xsd"
>
<name>Visa Application Process</name>
<description>Visa Application workflow Process</description>
<version>1</version>


<state>
    <name>logged-in</name>
    <initial>true</initial>
    <transitions>
        <transition>
            <name>apply</name>
            <target>fill-application-form</target>
            <default>true</default>
        </transition>
    </transitions>
</state>


<task>
    <name>fill-application-form</name>
    <actor>Applicant<actor/>
    <actions>
        <action>
            <name>fill-form</name>
            <execution-type>onEntry</execution-type>
            <script>
            
            </script>
            <script-language>javascript</script-language>
        </action>
    </actions>

    <assignments>
        <roles>
            <role>
                <role-type>account</role-type>
				<name>Applicant</name>
            </role>
            <role></role>
        </roles>
    </assignments>

    <transitions>
        <transition>
            <name>submit-selected-embassy</name>
            <target>embassy-first-review</target>
            <default>true</default>
        </transition>
    </transitions>
<task/>


<task>
    <name>submit-application</name>
    <actor>Applicant<actor/>
    <actions>
        <action>
            <name>fills-application-form</name>
            <execution-type>onAssignment</execution-type>
            <script>
                function fillApplicationForm() {}
            </script>
            <script-language>javascript</script-language>
            <!-- Fills out the visa application form -->
        </action>

        <action>
            <name>uploads-required-docs</name>
            <execution-type>onAssignment</execution-type>
            <script>
                function uploadReqDocs() {}
            </script>
            <script-language>javascript</script-language>
            <!-- Uploads required documents (passport, travel, itinery, e.t.c) -->
        </action>
    </actions>

    <assignments>
        <Applicant />
    </assignments>

    <transitions>
        <transition>
            <name>submit-application</name>
            <target>make-payment</target>
            <default>true</default>
        </transition>
    </transitions>
<task/>


<task>
    <name>make-payment</name>
    <actor>Applicant<actor/>
    <actions>
        
        <notification>
            <name>Make-Payment</name>
            <execution-type>onAssignment</execution-type>
            <template>Your Application has been approved.</template>
            <template-language>text</template-language>
            <notification-type>email</notification-type>
            <!-- Â· Receives the approval notification. -->
        </notification>
        
        <action>
            <name>makes-payment</name>
            <execution-type>onAssignment</execution-type>
            <script>
                function makePayment() {}
            </script>
            <script-language>javascript</script-language>
            <!-- Makes the necessary payment through the integrated payment gateway. -->
        </action>
    </actions>

    <assignments>
        <Applicant />
    </assignments>

    <transitions>
        <transition>
            <name>payment-confirmation</name>
            <target>embassy-review</target>
            <default>true</default>
        </transition>
    </transitions>
<task/>


<task>
    <name>embassy-review</name>
    <actor>Embassy-Staff<actor/>
    <actions>

        <notification>
            <name>Review Notification</name>
            <execution-type>onAssignment</execution-type>
            <template>You have a new Application submission waiting for your review.</template>
            <template-language>text</template-language>
            <notification-type>email</notification-type>
            <!-- Receives notification of the submitted application. -->
        </notification>

        <action>
            <name>review-application</name>
            <execution-type>onAssignment</execution-type>
            <script>
                function reviewApplication() {}
            </script>
            <script-language>javascript</script-language>
            <!-- Reviews the application and documents. -->
        </action>

    </actions>

    <assignments>
        <Embassy-Staff />
    </assignments>

    <transitions>
        <transition>
            <name>complete-review</name>
            <target>background-check-process</target>
            <default>true</default>
        </transition>

        <transition>
            <name>complete-review</name>
            <target>document-verification</target>
            <default>true</default>
        </transition>

        <!-- <transition>
            <name>reject-application</name>
            <target>select-embassy</target>
            <default>false</default>
        </transition> -->
    </transitions>
<task/>


<task>
    <name>background-check-process</name>
    <actor>Burundi-National-Police<actor/>
    <actions>

        <notification>
            <name>Review Notification</name>
            <execution-type>onAssignment</execution-type>
            <template>You have a new Background check request waiting for your review.</template>
            <template-language>text</template-language>
            <notification-type>email</notification-type>
            <!-- Receives notification of a background check request. -->
        </notification>

        <action>
            <name>background-check</name>
            <execution-type>onAssignment</execution-type>
            <script>
                function backgroundCheck() {}
            </script>
            <script-language>javascript</script-language>
            <!-- Conducts character and background checks based on provided applicant details. -->
        </action>

    </actions>

    <assignments>
        <roles>
            <role>
                <role-type>community</role-type>
                <name>ID Authenticator</name>
            </role>
        </roles>

        <Embassy-Staff />
    </assignments>

    <transitions>
        <transition>
            <name>complete-background-check</name>
            <target>final-review</target>
            <default>true</default>
        </transition>
    </transitions>
<task/>


<task>
    <name>document-verification</name>
    <actor>Immigration-Department<actor/>
    <actions>

        <notification>
            <name>Verification Notification</name>
            <execution-type>onAssignment</execution-type>
            <template>You have a new document verification request waiting for your review.</template>
            <template-language>text</template-language>
            <notification-type>email</notification-type>
            <!-- Receives notification of a document verification request. -->
        </notification>

        <action>
            <name>document-verification</name>
            <execution-type>onAssignment</execution-type>
            <script>
                function documentVerification() {}
            </script>
            <script-language>javascript</script-language>
            <!-- Authenticates and verifies submitted documents. -->
        </action>

    </actions>

    <assignments>
        <Immigration-Department />
    </assignments>

    <transitions>
        <transition>
            <name>complete-document-verification</name>
            <target>final-review</target>
            <default>true</default>
        </transition>
    </transitions>
<task/>


<task>
    <name>final-review</name>
    <actor>Embassy-Staff<actor/>
    <actions>

        <action>
            <name>visa-approval-review</name>
            <execution-type>onAssignment</execution-type>
            <script>
                function approveVisa() {}
            </script>
            <script-language>javascript</script-language>
            <!-- Issues the approved visa or emergency travel document. -->
        </action>

    </actions>

    <assignments>
        <Embassy-Staff />
    </assignments>

    <transitions>
        <transition>
            <name>issue-visa</name>
            <target>document-issuance</target>
            <default>true</default>
        </transition>
    </transitions>
<task/>


<task>
    <name>document-issuance</name>
    <actor>Embassy-Staff<actor/>
    <actions>

        <action>
            <name>issue-approved-visa</name>
            <execution-type>onAssignment</execution-type>
            <script>
                function issueApprovedVisa() {}
            </script>
            <script-language>javascript</script-language>
            <!-- Issues the approved visa or emergency travel document. -->
        </action>

    </actions>

    <assignments>
        <Embassy-Staff />
    </assignments>

    <transitions>
        <transition>
            <name>issue-visa</name>
            <target>application-status-tracking</target>
            <default>true</default>
        </transition>
    </transitions>
<task/>



<task>
    <name>application-status-tracking</name>
    <actor>Applicant<actor/>
    <actions>
                
        <action>
            <name>track-application</name>
            <execution-type>onAssignment</execution-type>
            <script>
                function trackApplication() {}
            </script>
            <script-language>javascript</script-language>
            <!-- Tracks the status of their visa application in real-time. -->
        </action>

    </actions>

    <assignments>
        <Applicant />
    </assignments>
<task/>